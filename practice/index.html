<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Earning + Product Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 700px;
            margin: 40px auto;
            padding: 20px;
            border: 2px solid #ccc;
            border-radius: 12px;
        }
        input {
            width: 100%;
            padding: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        .table-input {
            width: 100%;
            text-align: right;
            padding: 4px;
            font-size: 15px;
        }
        .section {
            margin-top: 24px;
        }
        p {
            font-size: 16px;
            margin-top: 10px;
        }
        table {
            width: 100%;
            margin-top: 24px;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid #ccc;
        }
        th, td {
            padding: 8px;
            text-align: center;
        }
        button {
            margin-top: 12px;
            padding: 8px 12px;
            font-size: 16px;
        }
        .total-row {
            font-weight: bold;
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>

    <h2>üí∞ Hourly to Per-Second Earning Calculator</h2>

    <!-- Hourly Earning -->
    <label for="hourlyInput">1Ô∏è‚É£ Enter your hourly earning ($):</label>
    <input type="text" id="hourlyInput" placeholder="e.g. 1,200" oninput="formatInputAndCalculate()">
    <p id="perSecondResult">You earn $0.0000 per second.</p>

    <!-- Goal Money -->
    <div class="section">
        <label for="moneyGoal">2Ô∏è‚É£ Enter amount you want to earn ($):</label>
        <input type="text" id="moneyGoal" placeholder="e.g. 5,000" oninput="calculateTimeToEarn()">
        <p id="timeToEarnResult">‚è±Ô∏è It takes 0h 0m 0s to earn this.</p>
    </div>

    <!-- Goal Time -->
    <div class="section">
        <label for="timeInput">3Ô∏è‚É£ Enter time (hh:mm:ss, mm:ss, or ss):</label>
        <input type="text" id="timeInput" placeholder="e.g. 1:00:00 or 1:00 or 45" oninput="calculateEarningFromTime()">
        <p id="moneyFromTimeResult">üíµ You will earn $0.00 in this time.</p>
    </div>

    <!-- üì¶ Product Purchase Section -->
    <div class="section">
        <h3>üõí Product Purchase Calculator</h3>
        <label for="moneyAvailable">üíµ Money you have ($):</label>
        <input type="text" id="moneyAvailable" placeholder="e.g. 2,000" oninput="calculateProductPurchase()">

        <label for="productPrice">üì¶ Product price ($):</label>
        <input type="text" id="productPrice" placeholder="e.g. 45.5" oninput="calculateProductPurchase()">

        <p id="productResult">You can buy 0 products.</p>
        <p id="packageResult">That's 0 full packages (20 products each).</p>
    </div>

    <!-- üìä Earning Table -->
    <div class="section">
        <h3>üìä Earning Table</h3>
        <table id="earningTable">
            <thead>
                <tr>
                    <th>Hourly Earning ($)</th>
                    <th>Earning Per Second ($)</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
            <tfoot>
                <tr class="total-row">
                    <td>Total</td>
                    <td id="totalSecond">$0.0000</td>
                    <td id="totalSummary">Per Min: $0.00 | Per Hr: $0.00</td>
                </tr>
            </tfoot>
        </table>
        <button onclick="addRow()">‚ûï Add Row</button>
    </div>

    <script>
        let perSecond = 0;

        function formatNumberWithCommas(num) {
            return Number(num).toLocaleString('en-US');
        }

        function parseNumberWithCommas(str) {
            return parseFloat(str.replace(/,/g, '')) || 0;
        }

        function formatInputAndCalculate() {
            const input = document.getElementById('hourlyInput');
            const rawValue = input.value.replace(/,/g, '');
            const number = parseFloat(rawValue);
            const resultElement = document.getElementById('perSecondResult');

            if (!isNaN(number) && number > 0) {
                perSecond = number / 3600;
                input.value = formatNumberWithCommas(number);
                resultElement.textContent = `You earn $${perSecond.toLocaleString('en-US', { minimumFractionDigits: 4 })} per second.`;
                calculateTimeToEarn();
                calculateEarningFromTime();
            } else {
                perSecond = 0;
                resultElement.textContent = 'You earn $0.0000 per second.';
            }
        }

        function calculateTimeToEarn() {
            const goalInput = document.getElementById('moneyGoal');
            const amount = parseNumberWithCommas(goalInput.value);
            const resultElement = document.getElementById('timeToEarnResult');

            if (amount > 0 && perSecond > 0) {
                const totalSeconds = amount / perSecond;
                const hours = Math.floor(totalSeconds / 3600);
                const minutes = Math.floor((totalSeconds % 3600) / 60);
                const seconds = Math.floor(totalSeconds % 60);
                goalInput.value = formatNumberWithCommas(amount);
                resultElement.textContent = `‚è±Ô∏è It takes ${hours}h ${minutes}m ${seconds}s to earn this.`;
            } else {
                resultElement.textContent = '‚è±Ô∏è It takes 0h 0m 0s to earn this.';
            }
        }

        function parseFlexibleTime(input) {
            const parts = input.split(':').map(Number);
            if (parts.some(isNaN)) return 0;

            if (parts.length === 3) return parts[0] * 3600 + parts[1] * 60 + parts[2];
            if (parts.length === 2) return parts[0] * 60 + parts[1];
            if (parts.length === 1) return parts[0];
            return 0;
        }

        function calculateEarningFromTime() {
            const timeInput = document.getElementById('timeInput').value.trim();
            const totalSeconds = parseFlexibleTime(timeInput);
            const resultElement = document.getElementById('moneyFromTimeResult');

            if (totalSeconds > 0 && perSecond > 0) {
                const earning = totalSeconds * perSecond;
                resultElement.textContent = `üíµ You will earn $${earning.toLocaleString('en-US', { minimumFractionDigits: 2 })} in this time.`;
            } else {
                resultElement.textContent = 'üíµ You will earn $0.00 in this time.';
            }
        }

        function calculateProductPurchase() {
            const money = parseNumberWithCommas(document.getElementById('moneyAvailable').value);
            const price = parseNumberWithCommas(document.getElementById('productPrice').value);
            const productResult = document.getElementById('productResult');
            const packageResult = document.getElementById('packageResult');

            if (money > 0 && price > 0) {
                const productCount = Math.floor(money / price);
                const packageCount = Math.floor(productCount / 20);
                document.getElementById('moneyAvailable').value = formatNumberWithCommas(money);
                document.getElementById('productPrice').value = formatNumberWithCommas(price);
                productResult.textContent = `You can buy ${productCount} products.`;
                packageResult.textContent = `That's ${packageCount} full packages (20 products each).`;
            } else {
                productResult.textContent = `You can buy 0 products.`;
                packageResult.textContent = `That's 0 full packages (20 products each).`;
            }
        }

        function addRow() {
            const tableBody = document.getElementById('tableBody');
            const row = document.createElement('tr');

            const hourlyTd = document.createElement('td');
            const hourlyInput = document.createElement('input');
            hourlyInput.type = 'text';
            hourlyInput.placeholder = 'e.g. 1000';
            hourlyInput.className = 'table-input';
            hourlyInput.oninput = () => {
                let value = hourlyInput.value.replace(/,/g, '');
                if (!isNaN(value) && value.trim() !== '') {
                    hourlyInput.value = formatNumberWithCommas(value);
                }
                updateTable();
            };
            hourlyTd.appendChild(hourlyInput);

            const secondTd = document.createElement('td');
            secondTd.textContent = '$0.0000';

            const actionTd = document.createElement('td');
            const removeBtn = document.createElement('button');
            removeBtn.textContent = '‚ùå Remove';
            removeBtn.onclick = () => {
                row.remove();
                updateTable();
            };
            actionTd.appendChild(removeBtn);

            row.appendChild(hourlyTd);
            row.appendChild(secondTd);
            row.appendChild(actionTd);

            tableBody.appendChild(row);
        }

        function updateTable() {
            const rows = document.querySelectorAll('#tableBody tr');
            let totalHourly = 0;
            let totalSecond = 0;

            rows.forEach(row => {
                const hourlyInput = row.querySelector('input');
                const secondCell = row.children[1];
                const hourlyValue = parseNumberWithCommas(hourlyInput.value);

                if (hourlyValue > 0) {
                    const secondEarn = hourlyValue / 3600;
                    secondCell.textContent = `$${secondEarn.toFixed(4)}`;
                    totalHourly += hourlyValue;
                    totalSecond += secondEarn;
                } else {
                    secondCell.textContent = '$0.0000';
                }
            });

            document.getElementById('totalSecond').textContent = `$${totalSecond.toFixed(4)}`;
            document.getElementById('totalSummary').textContent = `Per Min: $${(totalSecond * 60).toFixed(2)} | Per Hr: $${(totalSecond * 3600).toFixed(2)}`;
        }
    </script>

</body>
</html>
